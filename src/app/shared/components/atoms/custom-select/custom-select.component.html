<div class="relative min-w-[200px] w-full" >
  <!-- Caja principal -->
  <div
    class="group transition-all h-[full] duration-200 ease-in-out flex w-full items-center px-2 py-[10px] min-h-[55px] border border-2 border-gray-300 rounded-md bg-white cursor-pointer hover:border-rose-500"
    (click)="toggleDropdown()">
    <div class="flex-1 text-gray-800"
      [ngClass]="userType != null ? 'flex items-center gap-2' : ''">
      @if (userType != null && touched) {
      <div
        class="w-7 h-7 rounded-full text-white font-bold flex items-center justify-center text-sm"
        [ngStyle]="{ 'background': userType === 'helper' ? getAvatarGradient() : getBackgroundColor(selectedLabel) }">
        {{ getInitial(selectedLabel) }}
      </div>
      }
      {{ selectedLabel }}
    </div>
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
      stroke-width="2" stroke="currentColor" class="w-4 h-4 text-gray-600"
      [class.rotate-180]="dropdownOpen">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </div>

  <!-- Dropdown -->
  <div *ngIf="dropdownOpen"
    class="absolute z-[10] bg-white border border-gray-200 rounded-md shadow-md w-full mt-1 max-h-60 overflow-y-auto">
    <div *ngFor="let option of options"
      class="group transition-all flex items-center p-2 pl-3 hover:bg-rose-500 hover:text-white cursor-pointer gap-2"
      (click)="selectOption(option)">
      @if (userType != null) {
        <div
          class="w-7 h-7 rounded-full text-white font-bold flex items-center justify-center text-sm"
          [ngStyle]="{ 'background': userType === 'helper' ? getAvatarGradient() : getBackgroundColor(option.label) }">
          {{ getInitial(option.label) }}
        </div>
      }
      <span class="text-gray-700 group-hover:text-white">{{ option.label
        }}</span>
    </div>
  </div>
</div>


